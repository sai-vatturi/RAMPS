<div class="container mx-auto p-4 text-[#494949]">
	<!-- Success Alert -->
	<div
	  *ngIf="showSuccessAlert"
	  class="fixed top-4 right-4 bg-[#88C533] text-white px-4 py-2 rounded-lg shadow-lg transition-opacity duration-300"
	>
	  {{ successMessage }}
	</div>

	<!-- Error Alert -->
	<div
	  *ngIf="showErrorAlert"
	  class="fixed top-4 right-4 bg-[#C53333] text-white px-4 py-2 rounded-lg shadow-lg transition-opacity duration-300"
	>
	  {{ errorMessage }}
	</div>

	<!-- Pending Meals Section -->
	<section *ngIf="userRole !== 'User' && userRole !== 'MealPlanner'" class="mb-8">
		<h2 class="text-2xl font-bold text-[#191B19] mb-4">Pending Meals</h2>
	  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
		<div
		  *ngFor="let meal of pendingMeals"
		  class="bg-white shadow-lg rounded-lg p-6 flex flex-col justify-between"
		>
		  <div>
			<h3 class="text-xl font-semibold mb-2 text-[#191B19]">{{ meal.title }}</h3>
			<p class="text-sm text-[#82867E]">Recipe ID: {{ meal.recipeId }}</p>
		  </div>
		  <button
			class="mt-4 bg-[#88C533] text-white px-4 py-2 rounded-lg hover:bg-[#6da32a] transition-colors"
			(click)="selectRecipe(meal.recipeId)"
		  >
			View Details
		  </button>
		</div>
	  </div>
	</section>

	<!-- Recipe Details Section -->
	<section *ngIf="selectedRecipeDetails" class="mb-8">
	  <h3 class="text-xl font-semibold text-[#191B19] mb-4">Recipe Details</h3>
	  <div class="bg-[#F5F5F5] shadow-lg rounded-lg p-6">
		<p><strong>Title:</strong> {{ selectedRecipeDetails.title }}</p>
		<p><strong>Description:</strong> {{ selectedRecipeDetails.description }}</p>
		<p><strong>Category:</strong> {{ selectedRecipeDetails.category }}</p>
		<p><strong>Ingredients:</strong> {{ selectedRecipeDetails.ingredients }}</p>
	  </div>
	</section>
	<h2 class="text-2xl font-bold text-[#191B19] mb-4">Existing Nutrition</h2>

	<!-- Filter and Search for Nutrition -->
<div class="flex flex-wrap justify-between items-center mb-4">
  <!-- Search Bar -->
  <input
    type="text"
    [(ngModel)]="nutritionSearchQuery"
    (input)="applyNutritionFilters()"
    placeholder="Search by recipe name..."
	class="w-full border border-gray-300 rounded-md shadow-sm px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#88C533]"
	/>

  <!-- Nutrition Filters -->
  <div class="flex flex-wrap gap-2 mb-4 pt-4">
    <button
      *ngFor="let filter of nutritionFilters"
      [class.bg-[#88C533]]="selectedNutritionFilter === filter"
      [class.text-white]="selectedNutritionFilter === filter"
	  class="px-4 py-2 rounded-md border border-[#88C533] text-[#494949] hover:bg-[#76b02e] hover:text-white transition-colors"
      (click)="applyNutritionFilter(filter)"
    >
      {{ filter }}
    </button>
  </div>


</div>
  <!-- Sorting Dropdown for Nutrition -->

  <div class="flex justify-end mb-4 space-x-2">
	<p class="self-center">Sort By:</p>
	<select
	  [(ngModel)]="selectedSortOption"
	  (change)="applyNutritionFilters()"
	  class="border border-gray-300 rounded-md px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#88C533]"
	>
	  <option value="caloriesAsc">Calories Ascending</option>
	  <option value="caloriesDesc">Calories Descending</option>
	  <option value="proteinAsc">Protein Ascending</option>
	  <option value="proteinDesc">Protein Descending</option>
	  <option value="carbsAsc">Carbs Ascending</option>
	  <option value="carbsDesc">Carbs Descending</option>
	  <option value="fatAsc">Fat Ascending</option>
	  <option value="fatDesc">Fat Descending</option>
	</select>
  </div>
<!-- Existing Nutrition Section -->
<section class="mb-8">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
	<div
	*ngFor="let nutrition of filteredNutrition"
	class="bg-white rounded-xl p-6 flex flex-col shadow-sm transition-transform transform hover:scale-105 hover:shadow-md"
	style="border: 1px solid rgba(0, 0, 0, 0.1);"
>



      <div class="flex-1">
        <h3 class="text-xl font-semibold mb-2 text-[#191B19]">{{ nutrition.recipeTitle }}</h3>
        <p>Calories: <span class="font-semibold text-[#4b7a0a]"> {{ nutrition.calories }} </span> </p>
        <p>Protein:  <span class="font-semibold text-[#4b7a0a]"> {{ nutrition.protein }}</span></p>
        <p>Carbs:  <span class="font-semibold text-[#4b7a0a]"> {{ nutrition.carbs }}</span></p>
        <p>Fat: <span class="font-semibold text-[#4b7a0a]"> {{ nutrition.fat }}</span></p>
        <p>Vitamins: <span class="font-semibold text-[#4b7a0a]"> {{ nutrition.vitamins }}</span></p>
      </div>
	  <div *ngIf="userRole !== 'User' && userRole !== 'MealPlanner'" class="mt-4 flex space-x-2">
        <button
          class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors"
          (click)="openEditModal(nutrition)"
        >
          Edit
        </button>
        <button
          class="bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors"
          (click)="confirmDelete(nutrition.nutritionId)"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</section>


	<!-- Nutrition Details Section -->
	<section *ngIf="selectedNutritionDetails" class="mb-8">
	  <h3 class="text-xl font-semibold text-[#191B19] mb-4">Nutrition Details</h3>
	  <div class="bg-[#F5F5F5] shadow-lg rounded-lg p-6">
		<p><strong>Calories:</strong> {{ selectedNutritionDetails.calories }}</p>
		<p><strong>Protein:</strong> {{ selectedNutritionDetails.protein }}</p>
		<p><strong>Carbs:</strong> {{ selectedNutritionDetails.carbs }}</p>
		<p><strong>Fat:</strong> {{ selectedNutritionDetails.fat }}</p>
		<p><strong>Vitamins:</strong> {{ selectedNutritionDetails.vitamins }}</p>
	  </div>
	</section>


	<!-- Edit Nutrition Modal -->
	<div
	  *ngIf="showEditModal"
	  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
	>
	  <div class="bg-white rounded-lg shadow-lg w-11/12 max-w-md p-6">
		<h3 class="text-xl font-semibold text-[#191B19] mb-4">Edit Nutrition</h3>
		<form (ngSubmit)="updateNutrition()" class="space-y-4">
		  <div class="flex flex-col">
			<label class="mb-1 text-sm font-medium" for="editRecipeId">Recipe ID:</label>
			<input
			  id="editRecipeId"
			  [(ngModel)]="nutritionData.recipeId"
			  name="editRecipeId"
			  type="number"
			  class="px-4 py-2 border border-[#82867E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#88C533]"
			  readonly
			/>
		  </div>
		  <div class="flex flex-col">
			<label class="mb-1 text-sm font-medium" for="editCalories">Calories:</label>
			<input
			  id="editCalories"
			  [(ngModel)]="nutritionData.calories"
			  name="editCalories"
			  type="number"
			  class="px-4 py-2 border border-[#82867E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#88C533]"
			  required
			/>
		  </div>
		  <div class="flex flex-col">
			<label class="mb-1 text-sm font-medium" for="editProtein">Protein:</label>
			<input
			  id="editProtein"
			  [(ngModel)]="nutritionData.protein"
			  name="editProtein"
			  type="number"
			  class="px-4 py-2 border border-[#82867E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#88C533]"
			/>
		  </div>
		  <div class="flex flex-col">
			<label class="mb-1 text-sm font-medium" for="editCarbs">Carbs:</label>
			<input
			  id="editCarbs"
			  [(ngModel)]="nutritionData.carbs"
			  name="editCarbs"
			  type="number"
			  class="px-4 py-2 border border-[#82867E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#88C533]"
			/>
		  </div>
		  <div class="flex flex-col">
			<label class="mb-1 text-sm font-medium" for="editFat">Fat:</label>
			<input
			  id="editFat"
			  [(ngModel)]="nutritionData.fat"
			  name="editFat"
			  type="number"
			  class="px-4 py-2 border border-[#82867E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#88C533]"
			/>
		  </div>
		  <div class="flex flex-col">
			<label class="mb-1 text-sm font-medium" for="editVitamins">Vitamins:</label>
			<input
			  id="editVitamins"
			  [(ngModel)]="nutritionData.vitamins"
			  name="editVitamins"
			  type="text"
			  class="px-4 py-2 border border-[#82867E] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#88C533]"
			/>
		  </div>
		  <div class="flex justify-end space-x-4">
			<button
			  type="submit"
			  class="bg-[#88C533] text-white px-4 py-2 rounded-lg hover:bg-[#6da32a] transition-colors"
			>
			  Update
			</button>
			<button
			  type="button"
			  (click)="closeEditModal()"
			  class="bg-[#C53333] text-white px-4 py-2 rounded-lg hover:bg-[#a12e2e] transition-colors"
			>
			  Cancel
			</button>
		  </div>
		</form>
	  </div>
	</div>

	<!-- Delete Confirmation Modal -->
	<div
	  *ngIf="showDeleteModal"
	  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
	>
	  <div class="bg-white rounded-lg shadow-lg w-11/12 max-w-md p-6">
		<h3 class="text-xl font-semibold text-[#191B19] mb-4">Confirm Deletion</h3>
		<p>Are you sure you want to delete this nutrition entry?</p>
		<div class="flex justify-end space-x-4 mt-6">
		  <button
			(click)="confirmNutritionId !== null && deleteNutrition(confirmNutritionId)"
			class="bg-[#C53333] text-white px-4 py-2 rounded-lg hover:bg-[#a12e2e] transition-colors"
		  >
			Delete
		  </button>
		  <button
			(click)="closeDeleteModal()"
			class="bg-[#82867E] text-white px-4 py-2 rounded-lg hover:bg-[#6b6d68] transition-colors"
		  >
			Cancel
		  </button>
		</div>
	  </div>
	</div>
  </div>
